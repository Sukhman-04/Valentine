<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Valentine ðŸ’˜</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}

body{
  height:100vh;
  overflow:hidden;
  background:#120012;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
}

/* neon glow aesthetic */

.glow{
  text-shadow:
  0 0 10px #ff2f7f,
  0 0 20px #ff2f7f,
  0 0 40px #ff2f7f;
}

.screen{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  transition:1s;
}

.hidden{opacity:0;pointer-events:none;}

h1{font-size:44px;margin-bottom:20px;}

button{
  padding:16px 34px;
  font-size:18px;
  border:none;
  border-radius:14px;
  cursor:pointer;
  font-weight:bold;
  margin:10px;
  background:#ff2f7f;
  color:white;
  box-shadow:0 0 20px #ff2f7f;
  transition:.3s;
}

button:hover{transform:scale(1.1);}

#yes{background:white;color:#ff2f7f}

canvas{position:fixed;inset:0;pointer-events:none}
</style>
</head>

<body>

<!-- intro -->
<div class="screen" id="intro">
  <h1 class="glow">Tap to open message ðŸ’Œ</h1>
  <button onclick="openIntro()">Open</button>
</div>

<!-- question -->
<div class="screen hidden" id="question">
  <h1 id="qText" class="glow">Will you be my Valentine? ðŸ’˜</h1>
  <button id="yes">Yes ðŸ’—</button>
  <button id="no">No ðŸ˜¢</button>
</div>

<!-- celebration -->
<div class="screen hidden" id="celebrate">
  <h1 class="glow">YAAAAAY ðŸ’˜</h1>
  <div id="typed" style="font-size:26px;margin-top:20px"></div>
</div>

<canvas id="petals"></canvas>

<audio id="music" loop>
<source src="https://cdn.pixabay.com/download/audio/2023/03/30/audio_8c8e2e9b6e.mp3">
</audio>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
const intro = document.getElementById("intro");
const question = document.getElementById("question");
const celebrate = document.getElementById("celebrate");
const music = document.getElementById("music");

/* intro reveal + guaranteed music unlock */

function openIntro(){
  music.play().catch(()=>{}); // unlock audio
  intro.classList.add("hidden");
  question.classList.remove("hidden");
}

/* growing yes mechanic */

let scale=1;
const yes=document.getElementById("yes");
const no=document.getElementById("no");
const qText=document.getElementById("qText");

const msgs=["Are you sure? ðŸ¥º","Think again ðŸ’”","I'll cry ðŸ˜¢","Please? ðŸ’•","Last chance ðŸ˜³"];
let step=0;

no.onclick=()=>{
  scale+=0.3;
  yes.style.transform=`scale(${scale})`;
  if(step<msgs.length) qText.innerText=msgs[step++];
};

/* celebration */

yes.onclick=()=>{
  question.classList.add("hidden");
  celebrate.classList.remove("hidden");

  confetti({particleCount:300,spread:150});

  const message="You just made my heart glow brighter than sun ðŸ’—";
  let i=0;
  function type(){
    if(i<message.length){
      document.getElementById("typed").innerHTML+=message[i++];
      setTimeout(type,40);
    }
  }
  type();
};

/* falling heart petals */

const canvas=document.getElementById("petals");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

let petals=[];
for(let i=0;i<60;i++){
  petals.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    s:Math.random()*8+4,
    v:Math.random()*1+0.5
  });
}

function heart(x,y,s){
  ctx.fillStyle="rgba(255,100,150,0.6)";
  ctx.beginPath();
  ctx.moveTo(x,y);
  ctx.bezierCurveTo(x-s,y-s,x-2*s,y+s,x,y+2*s);
  ctx.bezierCurveTo(x+2*s,y+s,x+s,y-s,x,y);
  ctx.fill();
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  petals.forEach(p=>{
    p.y+=p.v;
    if(p.y>canvas.height)p.y=0;
    heart(p.x,p.y,p.s);
  });
  requestAnimationFrame(animate);
}

animate();

onresize=()=>{
  canvas.width=innerWidth;
  canvas.height=innerHeight;
};
</script>

</body>
</html>
