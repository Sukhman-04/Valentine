<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine ðŸ’˜</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif;}

body{
  height:100vh;
  overflow:hidden;
  background:radial-gradient(circle,#ff6fa5,#ff2f7f);
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
}

.screen{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  transition:1s;
}

.hidden{opacity:0;pointer-events:none;}

h1{font-size:40px;margin-bottom:20px;}

button{
  padding:15px 30px;
  font-size:18px;
  border:none;
  border-radius:14px;
  cursor:pointer;
  font-weight:bold;
  margin:10px;
  transition:.3s;
}

#yes{background:white;color:#ff2f7f;}
#no{background:#ff2f7f;color:white;}

button:hover{transform:scale(1.1);}

canvas{position:fixed;inset:0;pointer-events:none;}
</style>
</head>

<body>

<!-- intro screen -->
<div class="screen" id="intro">
  <h1>Tap to open ðŸ’Œ</h1>
  <button onclick="openMessage()">Open</button>
</div>

<!-- question screen -->
<div class="screen hidden" id="question">
  <h1 id="text">Will you be my Valentine? ðŸ’˜</h1>
  <button id="yes">Yes ðŸ’—</button>
  <button id="no">No ðŸ˜¢</button>
</div>

<!-- celebration -->
<div class="screen hidden" id="celebrate">
  <h1>YAAAAAY ðŸ’˜</h1>
  <div id="typed"></div>
</div>

<canvas id="petals"></canvas>

<audio id="music" loop>
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2b6bd6c1f6.mp3">
</audio>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
const intro=document.getElementById("intro");
const question=document.getElementById("question");
const celebrate=document.getElementById("celebrate");
const music=document.getElementById("music");

/* open intro */

function openMessage(){
  intro.classList.add("hidden");
  question.classList.remove("hidden");
  music.play(); // user interaction â†’ allowed
}

/* growing yes */

let scale=1;
const yes=document.getElementById("yes");
const no=document.getElementById("no");
const text=document.getElementById("text");

const msgs=["Are you sure? ðŸ¥º","Think againâ€¦ ðŸ’”","Iâ€™ll cry ðŸ˜¢","Please? ðŸ’•"];
let step=0;

no.onclick=()=>{
  scale+=0.25;
  yes.style.transform=`scale(${scale})`;
  if(step<msgs.length)text.innerText=msgs[step++];
};

/* celebration */

yes.onclick=()=>{
  question.classList.add("hidden");
  celebrate.classList.remove("hidden");
  confetti({particleCount:250,spread:140});

  const msg="You just made my heart explode with happiness ðŸ’—";
  let i=0;
  function type(){
    if(i<msg.length){
      document.getElementById("typed").innerHTML+=msg[i++];
      setTimeout(type,40);
    }
  }
  type();
};

/* falling petals */

const canvas=document.getElementById("petals");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

let petals=[];
for(let i=0;i<50;i++){
  petals.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    s:Math.random()*6+3,
    v:Math.random()*1+0.5
  });
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  petals.forEach(p=>{
    ctx.fillStyle="rgba(255,255,255,0.6)";
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.s,0,Math.PI*2);
    ctx.fill();
    p.y+=p.v;
    if(p.y>canvas.height)p.y=0;
  });
  requestAnimationFrame(draw);
}
draw();

onresize=()=>{
  canvas.width=innerWidth;
  canvas.height=innerHeight;
};
</script>

</body>
</html>
